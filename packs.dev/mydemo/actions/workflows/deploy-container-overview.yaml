version: 1.0

description: deploy-container-overview

input:
  - branch
  - containers_name
  - working_dir
  - rebuilding_timeout

vars:
  - msg: null

tasks:
  build:
    action: mydemo.build
    input:
      #working_dir: <% ctx().working_dir %>
      branch: <% ctx().branch %>
      containers_name: <% ctx().containers_name %> 
      cwd: <% ctx().working_dir %> 
      timeout: <% ctx().rebuilding_timeout %> 
    next:
      - when: <% succeeded() %>
        publish:
          - msg: <% result().output.msg %>
      - when: <% failed() %>
        do: fail
        publish:
          - msg: <% result().output.msg %>

output:
  - msg: <% ctx().msg %>